@using Sandbox;
@using Sandbox.UI;
@inherits PanelComponent

<root>
	<div class="score">@manager.Score</div>
	<div class ="Leaderboard">
		
		@if(manager.Leaderboard is not null)
		{
			@foreach(var entry in manager.Leaderboard.Entries)
			{
				<div class="entry @IsMe(entry)"></div>
				<div class="rank">@entry.Rank</div>
				<div class="name">

					<image texture=@AvatarTexture(entry)></image>
					<lable>@entry.DisplayName</lable>
				</div>
				<div class="value">@entry.FormattedValue</div>
			}
		}





	</div>


</root>

@code
{

	[Property] Manager manager { get; set; }

	/// <summary>
	/// the hash determines if the system should be rebuilt. If it changes, it will be rebuilt
	/// </summary>
	string IsMe(Sandbox.Services.Leaderboards.Entry entry)
    {
        return entry.Me ? "me" : "";
    }

	string AvatarTexture(Sandbox.Services.Leaderboards.Entry entry)
    {
        return $"avatar:{entry.SteamId}";
		}
	protected override int BuildHash() => System.HashCode.Combine( manager );
}
